<html>
        <head>
        <title>Simple Ajax Example</title>
        <script language="Javascript">
        var DebugOn=false;
        function postRequest(baseAddr,strURL,strJSON,strDestinationPage) {
        
        	// Create xmlHTTP Ajax Object
			var xmlHttp;
			//alert(baseAddr);
			
			if(DebugOn == true) alert(strURL);
			if(DebugOn == true) alert(strJSON);
			
            if (window.XMLHttpRequest) { // Mozilla, Safari, ...
		         var xmlHttp = new XMLHttpRequest();
	        }else if (window.ActiveXObject) { // IE
		         var xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
	        }
	        if(DebugOn == true) alert("1");
	        // Set POST 
		    xmlHttp.open("POST", strURL, true);
		    // Set Application Content Type
		    if(DebugOn == true) alert("2");
			xmlHttp.setRequestHeader("Content-Type","application/json");
			if(DebugOn == true) alert("3");
			xmlHttp.setRequestHeader("Content-length", strJSON.length);
			if(DebugOn == true) alert("4");
    		xmlHttp.setRequestHeader("Connection", "close");
		    if(DebugOn == true) alert("5");
		    
		   xmlHttp.onreadystatechange = function()
		   {
        		if (xmlHttp.readyState != 4) 
        			{
        				return true;
        			}
        		if (xmlHttp.status != 200 && x.status != 304) {            		
            		return;
        		}
				//alert('almost there');
				if(DebugOn == true) alert(xmlHttp.responseText);
        		var obj = JSON.parse(xmlHttp.responseText);
        		if(DebugOn == true) alert('obj.returnCode');
        		if(DebugOn == true) alert(obj.returnCode);
        		
        		
				
        		if(obj.returnCode =='SUCCESS'){
            			if(DebugOn == true) alert('That worked!');
            			window.location = baseAddr+"/" + strDestinationPage;
            			return true;
        			}else{
            		if(DebugOn == true) alert('That didn\'t work!');
            		updatepage(obj.returnCode);
            		return false;
        	}
        
    }
        if(DebugOn == true) alert(strJSON);
        xmlHttp.send(strJSON);
        if(DebugOn == true) alert('after send');
        
        }
        

        function updatepage(str){
		  document.getElementById("result").innerHTML = 	"<font color='red' size='5'>" + str + "</font>";;
        }

        function Signup(){
        var base_addr=window.document.f1.action.replace("/Thanks.html","");
        //alert(base_addr);
        var url=base_addr + "/rest/SV/register";
			//alert(url);
			 
        	var user_id=window.document.f1.user_id.value;
			var username=window.document.f1.username.value;
			var usertype=window.document.f1.usertype.value;
			var userdesc=window.document.f1.userdescr.value;
			var pass=window.document.f1.userpass.value;
			
			var data={};
    		data.username=window.document.f1.username.value;
    		data.usertype=window.document.f1.usertype.value;
    		data.userdescr=window.document.f1.userdescr.value;
    		data.userpass=window.document.f1.userpass.value;
    		data.user_id=window.document.f1.user_id.value;
    		
    		var strJSON = JSON.stringify(data);
						 
			if(DebugOn == true) alert('before post reuest');
			if(DebugOn == true) alert(base_addr);
			if(DebugOn == true) alert(url);
			if(DebugOn == true) alert('JSON string');
			if(DebugOn == true) alert(strJSON);
			var result = postRequest(base_addr,url,strJSON,"Thanks.html");
			
			
        }
        
        // Function Hander for LogIn Click event
        function Login(){
        	if(DebugOn == true) alert('process login');
        	// Get base address of the Server 
        	var base_addr=window.document.f1.action.replace("/Thanks.html","");
        	if(DebugOn == true) alert(base_addr);
        	var url=base_addr + "/rest/SV/login";
			if(DebugOn == true) alert(url);
			 
        	
			var username=window.document.f1.login_username.value;
			var pass=window.document.f1.login_userpass.value;
			
			var data={};
    		data.username=window.document.f1.login_username.value;
    		data.userpass=window.document.f1.login_userpass.value;
    		
    		var strJSON = JSON.stringify(data);
			if(DebugOn == true) alert(strJSON);
			 			
			var result = postRequest(base_addr,url,strJSON,"LandingPage.html");
			
        }
        </script>
        </head>
        <body>
         
        
        <h1 align="center"><font color="#000080">Sanjeevani EHR Driver </font></h1>
        
        <h2 align="center"><font color="#000080">User Details...</font></h2>
        
        <p  align="center"><font color="#000080">Please enter User details...</font></p>
        <form name="f1" action="Thanks.html" method="POST">
         
          <p align="center"><font color="#000080">&nbsp; <br />
            Enter User Unique ID (Passport, Adhar or SSN): <input type="text" name="user_id" id="user_id"> <br />
		    Enter username: <input type="text" name="username" id="username"> <br />
		     Enter usertype: <input type="text" name="usertype" id="usertype"> <br />
		     Enter userdesc: <input type="text" name="userdescr" id="userdescr"> <br />
		     Enter pass: <input type="text" name="userpass" id="userpass"> <br />
		     <br />
		     <br />
		    <input value="Signup" type="button" onclick='JavaScript:Signup()'>
		    <input value="Submit" type="Submit"></p>
			<div align=center>
			
			<h2 align=center> Login Test </h2>
			
			 	Enter username: <input type="text" name="login_username" id="login_username"> <br />
			  Enter pass: <input type="text" name="login_userpass" id="login_userpass"> <br />
			  
			  <input value="Login" type="button" onclick='JavaScript:Login()'>
			</div>  
				<div id="result" align="center"></div>

        </form>
		<div id=result></div>
</body>
</html>